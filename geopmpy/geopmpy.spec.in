#  Copyright (c) 2015 - 2024 Intel Corporation
#  SPDX-License-Identifier: BSD-3-Clause
#

# Packages: python3-geopmpy

Summary: The geopmpy Python package for the GEOPM Runtime
Name: python3-geopmpy
Version: @VERSION@
Release: 1
License: BSD-3-Clause
%if 0%{?rhel_version} || 0%{?centos_ver} || 0%{?rocky_ver}
# Deprecated for RHEL and CentOS
Group: System Environment/Libraries
%else
Group: Development/Libraries/Python
%endif
URL: https://geopm.github.io
# Source0: https://github.com/geopm/geopm/archive/v3.1.0/geopm-3.1.0.tar.gz
Source0: geopm-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
BuildRequires: python3-devel
BuildRequires: python3-setuptools
BuildRequires: python-rpm-macros
Requires: python3-cffi >= 1.14.5
Requires: python3-cycler >= 0.11.0
Requires: python3-natsort >= 8.1.0
Requires: python3-numpy>=1.19.5
Requires: python3-pandas>=1.1.5
Requires: python3-psutil>=5.8.0
Requires: python3-pyyaml>=6.0.0
Requires: python3-setuptools>=53.0.0
Requires: python3-setuptools-scm>=6.4.2
Requires: python3-tables>=3.7.0
Requires: python3-geopmdpy
Requires: libgeopm2 = %{version}
Recommends: python3-geopmpy-doc
%if 0%{?fedora}
BuildRequires: marshalparser
%global debug_package %{nil}
%endif

%{?python_provide:%python_provide python3-geopmpy}

%description

Python3 package for GEOPM runtime.  Provides the implementation for
the runtime launcher and post-processing tools.

%prep
%setup -n geopm-%{version}
cd geopmpy
echo %{version} > geopmpy/VERSION

%build
cd geopmpy
%py3_build

%if 0%{?fedora}
%check
cd geopmdpy
python3 test
%endif

%install
cd geopmpy
%py3_install

# Installed files
%files
%defattr(-,root,root,-)
%{python3_sitelib}/*
%{_bindir}/geopmlaunch

%changelog
* Fri May 17 2024 Christopher M Cantalupo <christopher.m.cantalupo@intel.com> v3.1.0
- Official v3.1.0 release tag
